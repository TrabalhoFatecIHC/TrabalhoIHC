<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
     <title>Trabalho de IHC - Index</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

<link href="http://www.raymondcamden.com/demos/2013/aug/23/brick/brick-1.0beta5.css" rel="stylesheet">
<script src="http://www.raymondcamden.com/demos/2013/aug/23/brick/brick-1.0beta5.js"></script>
<script src="https://dl.dropboxusercontent.com/u/48558636/files/js/hammer.js"></script>
<link href="http://globocom.github.io/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
<link href="http://globocom.github.io/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">
<link href="http://globocom.github.io/bootstrap/assets/css/docs.css" rel="stylesheet">
<link href="http://globocom.github.io/bootstrap/assets/js/google-code-prettify/prettify.css" rel="stylesheet">
<link rel="shortcut icon" href="http://knowtec.com/wp-content/uploads/2013/07/onibus.png">
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    
<style>
	html, body{
		height: 100%;
		
	}
	
    #map-canvas{
	top:20px;
    width: 100%;
    height: 650px;
    border: 1px solid black;
    float: left;
    }
	
    </style>
	
	<script>

	
		function showlocation() { 
			   navigator.geolocation.getCurrentPosition(callback);
			}
		 
		function callback(position) {
		 
		var lat = position.coords.latitude;
		var lon = position.coords.longitude;
		 
		var latLong = new google.maps.LatLng(lat, lon);
		 
			var marker = new google.maps.Marker({
					position: latLong
			});      
				 
			marker.setMap(map);
		map.setZoom(8);
		map.setCenter(marker.getPosition());
	  }

	var geolocation = showlocation();
	var directionsDisplay;
	
	var directionsService = new google.maps.DirectionsService();
	var map;

	var origem = new google.maps.LatLng();
	var destino = new google.maps.LatLng();

	var origem204 = new google.maps.LatLng(-23.202996,-45.783886);
	var destino204 = new google.maps.LatLng(-23.178807,-45.889498);

	var origem341 = new google.maps.LatLng(-23.213563,-45.804684);
	var destino341 = new google.maps.LatLng(-23.178807,-45.889498);

	var origem200 = new google.maps.LatLng(-23.152307,-45.782883);
	var destino200 = new google.maps.LatLng(-23.178807,-45.889498);

	var origem237 = new google.maps.LatLng(-23.202996,-45.783886);
	var destino237 = new google.maps.LatLng(-23.221737,-45.906581);


		function initialize() {

		  directionsDisplay = new google.maps.DirectionsRenderer();
		  var mapOptions = {
		  zoom: 14,
	
		  center: geolocation
		  }

		  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
		  directionsDisplay.setMap(map);

	  var marker = new google.maps.Marker({
	  position: geolocation,
	  map: map,
	  title: 'Avenida Pedro Friggi at 12:49'
	  });


	}

		function calcRoute() {
	      var line = document.getElementById('numOnibus').value;
		  var selectedMode = "TRANSIT";
		  
	  if (document.getElementById('numOnibus').value == '204') {
		origem = origem204;
		destino = destino204;
	  };
	  if (document.getElementById('numOnibus').value == '341') {
		origem = origem341;
		destino = destino341;
	  };
	  if (document.getElementById('numOnibus').value == '200') {
		origem = origem200;
		destino = destino200;
	  };
	  if (document.getElementById('numOnibus').value == '237') {
		origem = origem237;
		destino = destino237;
	  };

	  var request = {
		origin: origem,
		destination: destino,
		travelMode: google.maps.TravelMode[selectedMode]
	  };

		  directionsService.route(request, function(response, status) {
			if (status == google.maps.DirectionsStatus.OK) {
			  directionsDisplay.setDirections(response);
			}
		  });
		}

		google.maps.event.addDomListener(window, 'load', initialize);
</script>
<script>
document.addEventListener('DOMComponentsLoaded', function(){

    var deck = document.querySelector("#mainDeck");
    
    Hammer(deck).on("swipeleft", function () {
            deck.shuffleNext();
    });

    Hammer(deck).on("swiperight", function () {
            deck.shufflePrev();
    });
    
});	
</script>

</head>

<body>

<x-layout>
     <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="index.html" >Trabalho de IHC</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="home"><a href="index.html">Início</a></li>
              <li><a href="horarios.html">Horários</a></li>		  
            </ul>
          </div>
        </div>
      </div>
    </div>
    <x-deck id="mainDeck" selected-index="0">
    <x-card>
       
		<div class="container">
		<div class="row"> 
        <div class="span3">     
			<h3>Linha de Ônibus</h3><br />
			<select id="numOnibus" onchange="calcRoute();">
				<option>Selecione</option>
				<option value="204">204</option>
				<option value="341">341</option>
				<option value="200">200</option>
				<option value="237">237</option>
			</select>
		
		<!------PESQUISA POR VOZ------->
		<input type="text" x-webkit-speech />
		<!--input id="search" type="text" name="q" value="" maxlength="128" speech="speech" x-webkit-speech="x-webkit-speech" x-webkit-grammar="builtin:translate" lang="pt-br" onclick="this.value = &quot; &quot;" onwebkitspeechchange="this.form.submit();" autocomplete="off"-->
		
		
	     <button class="btn btn-primary " type="button" onclick="javascript:showlocation()">Check in</button>	
			
				<!--p>Latitude:</p> <span id="latitude"></span>       
 
               <!--p> Longitude:</p> <span id="longitude"></span-->
				
				
		
        </div>
		
		<div class="span9">
			<div id="map-canvas"></div> 
		</div>
    </div>

	</div>
    </x-card>
        <x-card>
            <div class="container">
			<div class="row">
			  <div class="span3">
			   
				 <h3>Linha de Ônibus</h3><br />
				
				<select onChange="window.location.href=this.value" class="span3">
					<option>Selecione</option>
					<option value="204.html">204</option>
					<option value="341.html">341</option>
					<option value="200.html">200</option>
					<option value="237.html">237</option>
				</select>

			  </div>
			</div>
			 </div>

        </x-card>

    </x-deck>
   
    
</x-layout>
  <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/jquery.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/google-code-prettify/prettify.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-transition.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-alert.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-modal.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-tab.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-tooltip.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-popover.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-balloon.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-button.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-collapse.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-carousel.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-typeahead.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/bootstrap-affix.js"></script>
    <script src="http://globocom.github.io/bootstrap/assets/js/application.js"></script>
	
</body>

</html>
